{"version":3,"file":"frameplayer.js","sources":["../src/main.js","../src/debug.js","../src/frame.js","../src/player.js"],"names":["window","frameplayer","FP","debug","enabled","log","caller","items","this","execConsoleFunc","info","warn","error","method","console","methods","i","length","args","x","push","apply","frame","frameUrl","base","$FP","url","loaded","__construct","load","deferred","$","Deferred","img","Image","onload","resolve","onerror","src","promise","getUrl","isLoaded","arguments","player","options","frameRate","domElement","canvasClass","scrubberClass","coverImg","bufferSize","loop","autoPlay","autoLoad","playerWidth","playerHeight","frames","onReady","onLoadStart","onLoadStop","onLoadProgress","lastFrameLoaded","totalFrames","percentageLoaded","onLoadComplete","onPlay","onBufferStart","onBufferStop","onStop","onFinish","onEnterFrame","currentFrame","onExitFrame","onLoop","onReset","ready","playerState","loaderState","element","canvasContainer","canvas","canvasContext","canvasImg","scrubber","playerTimeout","extend","setFrames","first","find","document","createElement","getContext","append","setPlayerSize","renderUrl","call","startAnimationLoop","clearFrames","addFrames","addFrame","goToFrame","frameNumber","renderFrame","drawImage","width","height","requiresBuffer","actualBufferSize","configuredBufferSize","substr","Math","ceil","parseInt","play","getNumFrames","buffer","frameDelay","timeOld","timeNew","timeDiff","percentagePlayed","Date","now","processFrame","requestAnimationFrame","stop","addClass","doBuffer","setTimeout","bufferStop","startFrame","doLoad","calcPercentLoaded","done","loadStop","removeClass","getPlayerState","getLoaderState","getCurrentFrame","reset","removeAttr"],"mappings":"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"}