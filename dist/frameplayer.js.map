{"version":3,"file":"frameplayer.js","sources":["../src/main.js","../src/debug.js","../src/frame.js","../src/player.js"],"names":["window","frameplayer","FP","debug","enabled","log","caller","items","this","execConsoleFunc","info","warn","error","method","console","methods","i","length","args","x","push","apply","frame","frameUrl","base","$FP","url","loaded","__construct","load","deferred","$","Deferred","img","Image","onload","resolve","src","promise","getUrl","isLoaded","arguments","player","options","frameRate","domElement","canvasClass","scrubberClass","coverImg","renderMode","bufferSize","loop","frames","onReady","onLoadStart","onLoadStop","onLoadProgress","onLoadComplete","onPlay","onBufferStart","onBufferStop","onStop","onEnterFrame","onExitFrame","onLoop","onReset","ready","playerState","loaderState","currentFrame","lastFrameLoaded","element","canvas","scrubber","extend","setFrames","first","find","goToFrame","renderUrl","call","clearFrames","addFrames","addFrame","frameNumber","renderFrame","css","requiresBuffer","actualBufferSize","configuredBufferSize","substr","Math","ceil","parseInt","play","doPlay","buffer","totalFrames","percentagePlayed","width","frameDelay","setTimeout","stop","doBuffer","bufferStop","startFrame","doLoad","calcPercentLoaded","done","percentageLoaded","loadStop","getPlayerState","getLoaderState","getCurrentFrame","reset"],"mappings":"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"}