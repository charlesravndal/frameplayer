{"version":3,"file":"frameplayer.js","sources":["../src/main.js","../src/debug.js","../src/frame.js","../src/player.js"],"names":["window","frameplayer","FP","debug","enabled","log","caller","items","this","execConsoleFunc","info","warn","error","method","console","methods","i","length","args","x","push","apply","frame","frameUrl","base","$FP","url","loaded","__construct","load","deferred","$","Deferred","img","Image","onload","resolve","onerror","src","promise","getUrl","isLoaded","arguments","player","options","frameRate","domElement","canvasClass","scrubberClass","coverImg","bufferSize","loop","autoPlay","autoLoad","frames","onReady","onLoadStart","onLoadStop","onLoadProgress","lastFrameLoaded","totalFrames","percentageLoaded","onLoadComplete","onPlay","onBufferStart","onBufferStop","onStop","onEnterFrame","currentFrame","onExitFrame","onLoop","onReset","ready","playerState","loaderState","element","canvasContainer","canvas","canvasContext","canvasImg","scrubber","playerTimeout","extend","setFrames","first","find","document","createElement","width","height","getContext","append","renderUrl","call","play","clearFrames","addFrames","addFrame","goToFrame","frameNumber","renderFrame","drawImage","requiresBuffer","actualBufferSize","configuredBufferSize","substr","Math","ceil","parseInt","getNumFrames","doPlay","buffer","percentagePlayed","frameDelay","clearTimeout","setTimeout","stop","addClass","doBuffer","bufferStop","startFrame","doLoad","calcPercentLoaded","done","loadStop","removeClass","getPlayerState","getLoaderState","getCurrentFrame","reset","removeAttr"],"mappings":"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"}