{"version":3,"file":"frameplayer.js","sources":["../src/main.js","../src/debug.js","../src/frame.js","../src/player.js"],"names":["window","frameplayer","FP","debug","enabled","log","caller","items","this","execConsoleFunc","info","warn","error","method","console","methods","i","length","args","x","push","apply","frame","frameUrl","base","$FP","url","loaded","__construct","load","deferred","$","Deferred","img","Image","onload","resolve","onerror","src","promise","getUrl","isLoaded","arguments","player","options","frameRate","domElement","canvasClass","scrubberClass","coverImg","bufferSize","loop","autoPlay","autoLoad","playerWidth","playerHeight","frames","onReady","onLoadStart","onLoadStop","onLoadProgress","lastFrameLoaded","totalFrames","percentageLoaded","onLoadComplete","onPlay","onBufferStart","onBufferStop","onStop","onEnterFrame","currentFrame","onExitFrame","onLoop","onReset","ready","playerState","loaderState","element","canvasContainer","canvas","canvasContext","canvasImg","scrubber","playerTimeout","extend","setFrames","first","find","document","createElement","getContext","append","setPlayerSize","renderUrl","call","startAnimationLoop","clearFrames","addFrames","addFrame","goToFrame","frameNumber","renderFrame","drawImage","width","height","requiresBuffer","actualBufferSize","configuredBufferSize","substr","Math","ceil","parseInt","play","getNumFrames","buffer","frameDelay","timeOld","timeNew","timeDiff","percentagePlayed","Date","now","processFrame","requestAnimationFrame","stop","addClass","doBuffer","setTimeout","bufferStop","startFrame","doLoad","calcPercentLoaded","done","loadStop","removeClass","getPlayerState","getLoaderState","getCurrentFrame","reset","removeAttr"],"mappings":"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"}